<form [formGroup]="form" (ngSubmit)="submit()" class="form-container">
  <ng-container *ngFor="let field of formFields">
    <ng-container *ngIf="!excludeFields.includes(field.key)">
      <mat-form-field *ngIf="field.type !== 'checkbox'"
                      appearance="outline"
                      class="form-field">
        <mat-label>{{ field.key }}</mat-label>
        <input matInput
               [type]="field.type"
               [formControlName]="field.key"
               required/>

        <mat-error *ngIf="form.get(field.key)?.hasError('required')">
          {{ field.key }} is required
        </mat-error>
        <mat-error *ngIf="form.get(field.key)?.hasError('email')">
          Invalid email format
        </mat-error>
        <mat-error *ngIf="form.get(field.key)?.hasError('min')">
          Minimum: {{ form.get(field.key)?.getError('min')?.min }}
        </mat-error>
        <mat-error *ngIf="form.get(field.key)?.hasError('max')">
          Maximum: {{ form.get(field.key)?.getError('max')?.max }}
        </mat-error>
      </mat-form-field>

      <mat-checkbox *ngIf="field.type === 'checkbox'"
                    [formControlName]="field.key">
        {{ field.key }}
      </mat-checkbox>
    </ng-container>
  </ng-container>

  <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">
    Submit
  </button>
</form>
